<!doctype html><html lang=ja-jp>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<title>React NativeでWebviewを使った際にユーザーのアクションでリロードさせる - Meijin Tech Memo</title>
<meta name=description content="refを使って、onReloadといった任意のイベントハンドラでcurrent!.reload()させると手動でリロードが出来ます。 普通はpullToRefreshEnabledを使えば対応できると思いますが、こういう方法もあるということで。
import { View } from &#34;../components/Themed&#34;; import { WebView } from &#34;react-native-webview&#34;; import { Fab, Icon } from &#34;native-base&#34;; import { AntDesign } from &#34;@expo/vector-icons&#34;; export default function WebviewScreen() { const webview = useRef<WebView>(null) const onReload = () => { webview.current!.reload() } return ( <View style={styles.container}> <WebView ref={webview} pullToRefreshEnabled={true} source={{ uri: &#34;https://expo.dev&#34;, }} /> <Fab right={30} bottom={60} icon={ <Icon color={&#34;white&#34;} as={<AntDesign name={&#34;heart&#34;}/>} /> } onTouchEnd={onReload} /> </View> ); } ">
<meta name=author content>
<link rel="preload stylesheet" as=style href=https://texmeijin.github.io/my-tech-memo/app.min.css>
<link rel="preload stylesheet" as=style href=https://texmeijin.github.io/my-tech-memo/an-old-hope.min.css>
<script defer src=https://texmeijin.github.io/my-tech-memo/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=https://texmeijin.github.io/my-tech-memo/theme.png>
<link rel=icon href=https://texmeijin.github.io/my-tech-memo/favicon.ico>
<link rel=apple-touch-icon href=https://texmeijin.github.io/my-tech-memo/apple-touch-icon.png>
<meta name=generator content="Hugo 0.88.1">
<meta property="og:title" content="React NativeでWebviewを使った際にユーザーのアクションでリロードさせる">
<meta property="og:description" content="refを使って、onReloadといった任意のイベントハンドラでcurrent!.reload()させると手動でリロードが出来ます。 普通はpullToRefreshEnabledを使えば対応できると思いますが、こういう方法もあるということで。
import { View } from &#34;../components/Themed&#34;; import { WebView } from &#34;react-native-webview&#34;; import { Fab, Icon } from &#34;native-base&#34;; import { AntDesign } from &#34;@expo/vector-icons&#34;; export default function WebviewScreen() { const webview = useRef<WebView>(null) const onReload = () => { webview.current!.reload() } return ( <View style={styles.container}> <WebView ref={webview} pullToRefreshEnabled={true} source={{ uri: &#34;https://expo.dev&#34;, }} /> <Fab right={30} bottom={60} icon={ <Icon color={&#34;white&#34;} as={<AntDesign name={&#34;heart&#34;}/>} /> } onTouchEnd={onReload} /> </View> ); } ">
<meta property="og:type" content="article">
<meta property="og:url" content="https://texmeijin.github.io/my-tech-memo/posts/rn-webview-reload/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-09-14T22:03:00+09:00">
<meta property="article:modified_time" content="2021-09-14T22:03:00+09:00">
<meta itemprop=name content="React NativeでWebviewを使った際にユーザーのアクションでリロードさせる">
<meta itemprop=description content="refを使って、onReloadといった任意のイベントハンドラでcurrent!.reload()させると手動でリロードが出来ます。 普通はpullToRefreshEnabledを使えば対応できると思いますが、こういう方法もあるということで。
import { View } from &#34;../components/Themed&#34;; import { WebView } from &#34;react-native-webview&#34;; import { Fab, Icon } from &#34;native-base&#34;; import { AntDesign } from &#34;@expo/vector-icons&#34;; export default function WebviewScreen() { const webview = useRef<WebView>(null) const onReload = () => { webview.current!.reload() } return ( <View style={styles.container}> <WebView ref={webview} pullToRefreshEnabled={true} source={{ uri: &#34;https://expo.dev&#34;, }} /> <Fab right={30} bottom={60} icon={ <Icon color={&#34;white&#34;} as={<AntDesign name={&#34;heart&#34;}/>} /> } onTouchEnd={onReload} /> </View> ); } "><meta itemprop=datePublished content="2021-09-14T22:03:00+09:00">
<meta itemprop=dateModified content="2021-09-14T22:03:00+09:00">
<meta itemprop=wordCount content="71">
<meta itemprop=keywords content="react native,">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="React NativeでWebviewを使った際にユーザーのアクションでリロードさせる">
<meta name=twitter:description content="refを使って、onReloadといった任意のイベントハンドラでcurrent!.reload()させると手動でリロードが出来ます。 普通はpullToRefreshEnabledを使えば対応できると思いますが、こういう方法もあるということで。
import { View } from &#34;../components/Themed&#34;; import { WebView } from &#34;react-native-webview&#34;; import { Fab, Icon } from &#34;native-base&#34;; import { AntDesign } from &#34;@expo/vector-icons&#34;; export default function WebviewScreen() { const webview = useRef<WebView>(null) const onReload = () => { webview.current!.reload() } return ( <View style={styles.container}> <WebView ref={webview} pullToRefreshEnabled={true} source={{ uri: &#34;https://expo.dev&#34;, }} /> <Fab right={30} bottom={60} icon={ <Icon color={&#34;white&#34;} as={<AntDesign name={&#34;heart&#34;}/>} /> } onTouchEnd={onReload} /> </View> ); } ">
</head>
<body class=not-ready data-menu=false>
<header class=header>
<p class=logo>
<a class=site-name href=https://texmeijin.github.io/my-tech-memo/>Meijin Tech Memo</a><a class=btn-dark></a>
</p>
<script>let bodyClx=document.body.classList,btnDark=document.querySelector('.btn-dark'),sysDark=window.matchMedia('(prefers-color-scheme: dark)'),darkVal=localStorage.getItem('dark'),setDark=a=>{bodyClx[a?'add':'remove']('dark'),localStorage.setItem('dark',a?'yes':'no')};setDark(darkVal?darkVal==='yes':sysDark.matches),requestAnimationFrame(()=>bodyClx.remove('not-ready')),btnDark.addEventListener('click',()=>setDark(!bodyClx.contains('dark'))),sysDark.addEventListener('change',a=>setDark(a.matches))</script>
</header>
<main class=main>
<article class=post-single>
<header class=post-title>
<p>
<time>Sep 14, 2021</time>
</p>
<h1>React NativeでWebviewを使った際にユーザーのアクションでリロードさせる</h1>
</header>
<section class=post-content><p><code>ref</code>を使って、onReloadといった任意のイベントハンドラで<code>current!.reload()</code>させると手動でリロードが出来ます。
普通は<code>pullToRefreshEnabled</code>を使えば対応できると思いますが、こういう方法もあるということで。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>View</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../components/Themed&#34;</span>;

<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>WebView</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react-native-webview&#34;</span>;
<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Fab</span>, <span style=color:#a6e22e>Icon</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;native-base&#34;</span>;
<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>AntDesign</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@expo/vector-icons&#34;</span>;

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>WebviewScreen() {</span>
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>webview</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useRef</span>&lt;<span style=color:#f92672>WebView</span>&gt;(<span style=color:#66d9ef>null</span>)
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>onReload</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
    <span style=color:#a6e22e>webview</span>.<span style=color:#a6e22e>current</span><span style=color:#f92672>!</span>.<span style=color:#a6e22e>reload</span>()
  }

  <span style=color:#66d9ef>return</span> (
    &lt;<span style=color:#f92672>View</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>styles</span>.<span style=color:#a6e22e>container</span>}&gt;
      &lt;<span style=color:#f92672>WebView</span>
        <span style=color:#a6e22e>ref</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>webview</span>}
        <span style=color:#a6e22e>pullToRefreshEnabled</span><span style=color:#f92672>=</span>{<span style=color:#66d9ef>true</span>}
        <span style=color:#a6e22e>source</span><span style=color:#f92672>=</span>{{
          <span style=color:#a6e22e>uri</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;https://expo.dev&#34;</span>,
        }}
      /&gt;
      &lt;<span style=color:#f92672>Fab</span>
        <span style=color:#a6e22e>right</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>30</span>}
        <span style=color:#a6e22e>bottom</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>60</span>}
        <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span>{
          &lt;<span style=color:#f92672>Icon</span> <span style=color:#a6e22e>color</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;white&#34;</span>} <span style=color:#a6e22e>as</span><span style=color:#f92672>=</span>{&lt;<span style=color:#f92672>AntDesign</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;heart&#34;</span>}/&gt;} /&gt;
        }
        <span style=color:#a6e22e>onTouchEnd</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onReload</span>}
      /&gt;
    &lt;/<span style=color:#f92672>View</span>&gt;
  );
}
</code></pre></div></section>
<footer class=post-tags>
<a href=https://texmeijin.github.io/my-tech-memo/tags/react-native>react native</a>
</footer>
<nav class=post-nav>
<a class=prev href=https://texmeijin.github.io/my-tech-memo/posts/dayjs-types-tips/><span>←</span><span>Dayjsのコンストラクタに渡せる、Date型とか文字列型のUnion型はDayjs側で提供されている</span></a>
<a class=next href=https://texmeijin.github.io/my-tech-memo/posts/css-skew-underline/><span>文字列に平行四辺形の下線を引く</span><span>→</span></a>
</nav>
</article>
</main>
<footer class=footer>
<p>&copy; 2021 <a href=https://texmeijin.github.io/my-tech-memo/>Meijin Tech Memo</a></p>
<p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p>
<p>
<a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper 5.1</a>
</p>
</footer>
</body>
</html>